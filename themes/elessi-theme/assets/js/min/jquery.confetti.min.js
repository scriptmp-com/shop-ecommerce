jQuery(document).ready(function(t){"use strict";t.confetti=new function(){function n(t){this.x=Math.random()*g,this.y=Math.random()*M-M,this.r=a(5,15),this.d=Math.random()*x+10,this.color=t,this.tilt=Math.floor(10*Math.random())-10,this.tiltAngleIncremental=.07*Math.random()+.05,this.tiltAngle=0,this.draw=function(){return p.beginPath(),p.lineWidth=this.r/2,p.strokeStyle=this.color,p.moveTo(this.x+this.tilt+this.r/4,this.y),p.lineTo(this.x+this.tilt,this.y+this.tilt+this.r/4),p.stroke()}}function i(){o(),t(window).on("resize",function(){g=window.innerWidth,M=window.innerHeight,y.width=g,y.height=M})}function o(){t("#nasa-confetti").length<1&&(t("form.nasa-shopping-cart-form").length?t("body").append('<canvas id="nasa-confetti" style="display: none;"></canvas>'):t("#cart-sidebar").length?t("#cart-sidebar").append('<canvas id="nasa-confetti" style="display: none;"></canvas>'):t("body").append('<canvas id="nasa-confetti" style="display: none;"></canvas>')),y=document.getElementById("nasa-confetti"),p=y.getContext("2d"),g=window.innerWidth,M=window.innerHeight,y.width=g,y.height=M,q=!0}function e(){y.style.display="block",A=[],T=!1;for(var t=0;x>t;t++){var i=R.getColor();A.push(new n(i))}l()}function r(){p.clearRect(0,0,g,M);for(var t=[],n=0;x>n;n++)!function(n){t.push(A[n].draw())}(n);return s(),t}function a(t,n){return Math.floor(Math.random()*(n-t+1)+t)}function s(){var t,n=0;I+=.01,_+=.1;for(var i=0;x>i;i++){if(t=A[i],T)return;!F&&t.y<-15?t.y=M+100:(h(t,i),t.y<=M&&n++,c(t,i))}0===n&&m()}function c(t,n){(t.x>g+20||t.x<-20||t.y>M)&&F&&(n%5>0||n%2==0?d(t,Math.random()*g,-10,Math.floor(10*Math.random())-10):Math.sin(I)>0?d(t,-5,Math.random()*M,Math.floor(10*Math.random())-10):d(t,g+5,Math.random()*M,Math.floor(10*Math.random())-10))}function h(t,n){t.tiltAngle+=t.tiltAngleIncremental,t.y+=(Math.cos(I+t.d)+10+t.r/2)/2,t.x+=Math.sin(I),t.tilt=10*Math.sin(t.tiltAngle-n/3)}function d(t,n,i,o){t.x=n,t.y=i,t.tilt=o}function l(){q||i(),g=window.innerWidth,M=window.innerHeight,y.width=g,y.height=M,function t(){return T?null:(v=requestAnimFrame(t),r())}()}function f(){clearTimeout(b),clearTimeout(v)}function u(){F=!1,f()}function m(){q||i(),T=!0,"undefined"!=typeof p&&(p.clearRect(0,0,g,M),y.style.display="none")}function w(){q||i(),f(),m(),b=setTimeout(function(){F=!0,T=!1,e()},100)}var y,p,g,M,b,v,x=300,A=[],I=0,_=0,F=!0,T=!0,q=!1,R={colorOptions:["#EF2964","#00C09D","#2D87B0","#48485E","#EFFF1D"],colorIndex:0,colorIncrementer:0,colorThreshold:10,getColor:function(){return this.colorIncrementer>=10&&(this.colorIncrementer=0,this.colorIndex++,this.colorIndex>=this.colorOptions.length&&(this.colorIndex=0)),this.colorIncrementer++,this.colorOptions[this.colorIndex]}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),this.init=i,this.start=e,this.stop=u,this.restart=w},t("body").on("nasa_confetti_init",function(){t.confetti.init()}),t("body").on("nasa_confetti_start",function(n,i){t.confetti.start(),"undefined"!=typeof i&&setTimeout(function(){t("body").trigger("nasa_confetti_stop")},i)}),t("body").on("nasa_confetti_restart",function(n,i){t.confetti.restart(),"undefined"!=typeof i&&setTimeout(function(){t("body").trigger("nasa_confetti_stop")},i)}),t("body").on("nasa_confetti_stop",function(){t.confetti.stop()})});